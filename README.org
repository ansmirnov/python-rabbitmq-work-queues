#+TITLE: Using work queues in RabbitMQ and Python

** Contents                                                           :TOC_3:
  - [[#environment-description][Environment description]]
  - [[#producer][Producer]]
    - [[#imports][Imports]]
    - [[#parameters][Parameters]]
    - [[#creds][Creds]]
  - [[#references][References]]

** Environment description

- Deployed RabbitMQ 3.8.11

- Python 3.9.1

Python requirements

#+BEGIN_SRC conf :tangle requirements.txt
pika==1.1.0
#+END_SRC

** Producer
*** Imports

Import system modules.

#+BEGIN_SRC python
import os
import sys
#+END_SRC

Import pika.

#+BEGIN_SRC python
import pika
#+END_SRC

*** Parameters

#+BEGIN_SRC python
RABBITMQ_HOST = os.environ.get("RABBITMQ_HOST")
RABBITMQ_USER = os.environ.get("RABBITMQ_USER")
RABBITMQ_PASSWORD = os.environ.get("RABBITMQ_PASSWORD")
#+END_SRC

*** Creds

#+BEGIN_SRC python
credentials = pika.PlainCredentials(RABBITMQ_USER, RABBITMQ_PASSWORD)
#+END_SRC

** References

1. https://www.rabbitmq.com/tutorials/tutorial-two-python.html

2. https://www.enterpriseintegrationpatterns.com/patterns/messaging/CompetingConsumers.html
